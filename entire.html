<!doctype html>
<html lang="ru">
  <head>
    <!-- Обязательные метатеги -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/js/bootstrap-datetimepicker.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.7.14/css/bootstrap-datetimepicker.min.css"> -->

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/build/ol.js"></script>


    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <link rel="stylesheet" href="css/legend.css">

    <title>кнопки тупа</title>
  </head>
  <body>
    <div class="container">
        <div class="row">
            <div class="col-2">
                <div class="form-group">
                    <label for="townChoose">Город</label>
                    <select class="form-select" id="townChoose" aria-label="Floating label select example">
                        <option selected>Вологда</option>
                        <option value="1">Москва</option>
                        <option value="2">Санкт-Перербург</option>
                        <option value="3">Мухосранск</option>
                    </select>
                </div>
                <label for="orderTypeChoose">Вид заказов</label>
                <select class="form-select" id="orderTypeChoose" aria-label="Floating label select example">
                    <option selected>Все заказы</option>
                    <option value="1">Новые</option>
                    <option value="2">Санкт-Перербург</option>
                </select>
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault">
                    <label class="form-check-label" for="flexCheckDefault">
                    Опоздавшие заказы
                    </label>
                </div>
                <label for="promoInput">Поиск по промокоду</label>
                <input class="form-control  " type="text" id="promoInput"/>
                <label>Период</label>
                <!-- <div class="form-group">
                    <div class='input-group date' id='datetimepicker1'>
                      <input type='text' class="form-control" />
                      <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                      </span>
                    </div>
                </div> -->
                <input class="form-control" type="text" name="datefilter" value="01.01.2018 - 01.15.2018" />

                <script type="text/javascript">
                    $(function() {

                        $('input[name="datefilter"]').daterangepicker({
                            autoUpdateInput: false,
                            locale: {
                                cancelLabel: 'Clear'
                            }
                        });

                        $('input[name="datefilter"]').on('apply.daterangepicker', function(ev, picker) {
                            $(this).val(picker.startDate.format('MM.DD.YYYY') + ' - ' + picker.endDate.format('MM.DD.YYYY'));
                        });

                        $('input[name="datefilter"]').on('cancel.daterangepicker', function(ev, picker) {
                            $(this).val('');
                        });

                    });
                </script>

                <div class="form-group row">
                    <div class="col-sm-10">
                        <button class="btn btn-primary">Сбросить фильтр</button>
                    </div>
                </div>
                <div class="form-group row">
                    <div class="col-sm-10">
                        <button type="submit" class="btn btn-primary">Показать</button>
                    </div>
                </div>
            </div>
            <div class="col-9">
                <div id="map" class="map" style="width: 100%; height: 500px"></div>
                <div>
                    <div class="legend container">
                        <div class="row">
                            <div class="progress-bar-block col-sm">
                                <div class="progress-bar row"></div>
                                <div class="progress-bar-values row">
            
                                    <div class="value-1 progress-bar-value col">0</div>
                                    <div class="value-2 progress-bar-value col">644</div>
                                    <div class="value-3 progress-bar-value col">1289</div>
                                    <div class="value-4 progress-bar-value col">1933</div>
                                    <div class="value-5 progress-bar-value col">2578</div>
            
                                </div>
                            </div>
                            <div class="number-of-orders col-sm">
                                <div class="number-of-orders-label label col">Количество заказов</div>
                                <div class="number-of-orders-value value col">0</div>
                            </div>
                            <div class="number-of-delay col-sm">
                                <div class="number-of-delay-label label col">Количество опозданий</div>
                                <div class="number-of-delay-value value col">0</div>
                            </div>
                            <div class="mean-delivery-time col-sm">
                                <div class="mean-delivery-time-label label col">Ср. время доставки</div>
                                <div class="mean-delivery-time-value value col">0</div>
                            </div>
                            <div class="revenue col-sm">
                                <div class="revenue-label label col">Выручка</div>
                                <div class="revenue-value value col">0</div>
                            </div>
                        </div>
                    </div>
            
            
                <!-- Optional JavaScript -->
                <!-- jQuery first, then Popper.js, then Bootstrap JS -->
                <!-- <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
                <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
                <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script> -->
                </div>
            </div>
        </div>
        <!-- Content here -->
    </div>
    <!-- Дополнительный JavaScript; выберите один из двух! -->

    <!-- Вариант 1: Bootstrap в связке с Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

    <!-- Вариант 2: Bootstrap JS отдельно от Popper
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js" integrity="sha384-W8fXfP3gkOKtndU4JGtKDvXbO53Wy8SZCQHczT5FMiiqmQfUpWbYdTil/SxwZgAN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.min.js" integrity="sha384-skAcpIdS7UcVUC05LJ9Dxay8AXcDYfBJqt1CJ85S/CFujBsIzCIv+l9liuYLaMQ/" crossorigin="anonymous"></script>
    -->
    <script type="text/javascript" src="orders_js.json"></script>
	<script type="text/javascript">
		raw_orders = JSON.parse(input_orders)
		console.log(raw_orders[0].point)
		features = []
		raw_orders.forEach(inp_point => {
			cord_i = inp_point.point.substring(1, inp_point.point.length - 1).split(',')
			cord = ol.proj.fromLonLat([cord_i[1], cord_i[0]])

			features.push(new ol.Feature({
				geometry: new ol.geom.Point(cord),
			}))
		})

		var map = new ol.Map({
			target: "map",
			layers: [
				new ol.layer.Tile({
					source: new ol.source.OSM(),
				}),
				new ol.layer.Heatmap({
					source: new ol.source.Vector({
						features: features,
					}),
					opacity: 0.5,
					radius: 12
				}),

			],
			view: new ol.View({
				center: ol.proj.fromLonLat([39.954962, 57.651345]),
				zoom: 11
			})
		});
	</script>
  </body>
</html>