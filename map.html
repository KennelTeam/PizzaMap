<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<link rel="stylesheet"
		href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/css/ol.css" type="text/css">
	<style>
		.map {
			height: 700px;
			width: 100%;
		}
	</style>
	<script type="text/javascript" src="orders_js.json"></script>
	<script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.9.0/build/ol.js"></script>
	<title>OpenLayers example</title>
</head>

<body>
	<h2>My Map</h2>
	<div id="map" class="map"></div>
	<script type="text/javascript">
		raw_orders = JSON.parse(input_orders)
		console.log(raw_orders[0].point)
		features = []
		raw_orders.forEach(inp_point => {
			cord_i = inp_point.point.substring(1, inp_point.point.length - 1).split(',')
			cord = ol.proj.fromLonLat([cord_i[1], cord_i[0]])

			features.push(new ol.Feature({
				'geometry': new ol.geom.Point(cord),
			}))
		})

		var map = new ol.Map({
			target: "map",
			layers: [
				new ol.layer.Tile({
					source: new ol.source.OSM()
				}),
				new ol.layer.Heatmap({
					source: new ol.source.Vector({
						features: features
					}),
					opacity: 0.5,
					radius: 12
				}),

			],
			view: new ol.View({
				center: ol.proj.fromLonLat([39.954962, 57.651345]),
				zoom: 11
			})
		});
	</script>
</body>

</html>